<div class="panel panel-default">

    <div class="panel-body" id="top-dashboard">
        ناحیه بندی
    </div>
</div>

<div  class="row" id="zone">

  <div class="col-md-12">
    <div id="zone_search" class="text-right">
        <div class="row">
            <div class="col-md-4 pull-right ">
                <label class="right">
                    ساختمان
                </label>
                <select
                        value="bu"
                        name="floor"
                        ng-model="vm.model.building"
                        class="form-control"
                        ng-change="vm.newRoom()"
                        ng-options="buildingItem.id as buildingItem.name for buildingItem in vm.building"
                >
                </select>
            </div>
            <div class="col-md-4 pull-right">
                <label class="right">
                    اتاق
                </label>
                <select
                        ng-disabled="vm.model.building==null"
                        name="floor"
                        ng-model="vm.model.room"
                        class="form-control"
                        ng-change="vm.getData()"
                        ng-options="roomItem.id as roomItem.name for roomItem in vm.rooms">
                </select>
            </div>

            <div class="col-md-4 pull-left">
                <label class="right" style="color: white">
.
                </label>
                <button ng-click="vm.saveChange()" ng-disabled="!vm.isReady" ng-class="{'btn-success' : vm.isReady}" class="btn btn-default width100">
                    ثبت تغییرات
                </button>
            </div>
      </div>
    </div>
  </div>

    <div ng-show="vm.isReady" class="col-md-12">
        <div class="row">
            <div class="col-md-4 pull-right text-right">

                <div class="toolbax">
                    <div class="toolbox-item">
                        <div class="toolbox-title">
                            لامپ
                        </div>
                        <div class="toolbox-content">
                            <div class="drag-lamp drag-item" ng-repeat='item in vm.lamps' ng-show="item.title" data-drag="true" ng-model="vm.lamps" jqyoui-draggable="{index: {{$index}}, animate: true}">{{item.title}}</div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <div class="toolbox-item">
                        <div class="toolbox-title">
                            مولتی سنسور
                        </div>
                        <div class="toolbox-content">
                            <div class="drag-multi drag-item" ng-repeat='item in vm.multisensors' ng-show="item.title" data-drag="true" ng-model="vm.multisensors" jqyoui-draggable="{index: {{$index}}, animate: true,}">{{item.title}}</div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-md-8 pull-right text-right">

                <div ng-repeat="zone in vm.zones" class="zone-item">
                    <div class="zone-title">{{zone.title}}</div>
                    <div class="zone-panel">
                        <ol data-drop="true" data-drag="true"  ng-model='zone.list'  jqyoui-droppable="{multiple:true}">
                            <div
                                    class=" drag-item"
                                    ng-repeat="item in zone.list track by $index"
                                    ng-class="item.type == 'lamp' ? 'drag-lamp' : ''  || item.type == 'multi' ? 'drag-multi' : ''"
                                    ng-show="item.title" data-drop="true"
                                    ng-model="zone.list"
                                    jqyoui-droppable="{index: {{$index}}, animate:true , onDrop: 'dropCallback'}"
                                    jqyoui-draggable="{index: {{$index}}, animate: true,}"
                            >{{item.type}} </div>
                        </ol>
                    </div>
                    <div class="clearfix"></div>
                </div>

                <div class="clearfix"></div>
                <div>
                    <fieldset>
                        <legend>
                            تعریف ناحیه جدید
                        </legend>
                        <div class="form-inline">
                            <div class="form-group pull-right">
                                <input ng-model="vm.zoneName" type="text" class="form-control ">
                            </div>
                            <button ng-click="vm.defineNewZone()" type="submit" class="btn btn-default">
                                ایجاد
                            </button>
                        </div>

                    </fieldset>
                </div>
                <div class="clearfix"></div>

                <br>
                <pre class="text-left">
      {{vm.zones | json}}
    </pre>

            </div>
        </div>
    </div>

</div>
